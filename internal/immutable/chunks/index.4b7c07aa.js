import{S as re,i as ae,s as ne,k as g,l as b,m as E,h as f,n as v,p as oe,M as q,b as S,J as fe,Z as Se,C as x,D as W,a as M,c as P,F as ee,G as p,$ as nt,E as se,H as de,q as H,e as _e,r as O,u as Z,I as it,V as ot,g as N,v as ce,d as B,f as ue,N as le,y as z,z as G,A as K,B as F,a2 as et,aj as ct,an as ut,P as De,K as ft,o as dt,ad as ht}from"./index.1aa50b20.js";import{v as _t,c as pt,a as $e,p as tt,y as lt,f as pe}from"./api-localstorage.1037570d.js";import{c as me}from"./light-cones.717b3371.js";import{b as vt,j as mt,k as ye,l as gt,m as Ve,p as st,n as rt,q as ve,a as at,B as Me,r as bt}from"./2.7ae1556a.js";import{p as X,c as we,B as kt}from"./ButtonIcon.de0b31e0.js";import{S as Pe,H as It}from"./Header.0786e3c0.js";import{c as Et,f as Tt}from"./WarpResult.3483ab70.js";import{T as wt}from"./Toast.60a9508a.js";function Re(r){let e,t,l,s,a,n,o,d,m,i;return{c(){e=g("div"),t=g("video"),l=g("source"),a=g("track"),n=M(),o=g("video"),d=g("source"),i=g("track"),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=E(e);t=b(h,"VIDEO",{class:!0});var w=E(t);l=b(w,"SOURCE",{src:!0}),a=b(w,"TRACK",{kind:!0}),w.forEach(f),n=P(h),o=b(h,"VIDEO",{class:!0});var $=E(o);d=b($,"SOURCE",{src:!0}),i=b($,"TRACK",{kind:!0}),$.forEach(f),h.forEach(f),this.h()},h(){ee(l.src,s=r[1]["phonograph1.mp4"])||v(l,"src",s),v(a,"kind","captions"),v(t,"class","phonograph-top svelte-xkg7i2"),t.autoplay=!0,t.loop=!0,t.muted=!0,ee(d.src,m=r[1]["phonograph2.mp4"])||v(d,"src",m),v(i,"kind","captions"),v(o,"class","phonograph-bottom svelte-xkg7i2"),o.autoplay=!0,o.loop=!0,o.muted=!0,v(e,"class","video-wrapper svelte-xkg7i2")},m(u,h){S(u,e,h),p(e,t),p(t,l),p(t,a),p(e,n),p(e,o),p(o,d),p(o,i)},p(u,h){h&2&&!ee(l.src,s=u[1]["phonograph1.mp4"])&&v(l,"src",s),h&2&&!ee(d.src,m=u[1]["phonograph2.mp4"])&&v(d,"src",m)},d(u){u&&f(e)}}}function Dt(r){let e,t,l=!r[2]&&Re(r);return{c(){e=g("div"),l&&l.c(),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0});var a=E(e);l&&l.l(a),a.forEach(f),this.h()},h(){v(e,"class","background svelte-xkg7i2"),oe(e,"--bg","url('"+r[1]["phonograph-bg.webp"]+"')"),q(e,"portrait",r[0])},m(s,a){S(s,e,a),l&&l.m(e,null)},p(s,[a]){r=s,r[2]?l&&(l.d(1),l=null):l?l.p(r,a):(l=Re(r),l.c(),l.m(e,null)),a&2&&oe(e,"--bg","url('"+r[1]["phonograph-bg.webp"]+"')"),a&1&&q(e,"portrait",r[0])},i(s){t||fe(()=>{t=Se(e,Et,{start:1.2,opacity:1,duration:1500,easing:vt(.2,.5,0,1)}),t.start()})},o:x,d(s){s&&f(e),l&&l.d()}}}function Vt(r,e,t){let l,s,a,n,o;return W(r,_t,d=>t(3,s=d)),W(r,pt,d=>t(4,a=d)),W(r,$e,d=>t(1,n=d)),W(r,tt,d=>t(2,o=d)),r.$$.update=()=>{r.$$.dirty&24&&t(0,l=a>9/16*s)},[l,n,o,s,a]}class At extends re{constructor(e){super(),ae(this,e,Vt,Dt,ne,{})}}function Ue(r,e,t){const l=r.slice();return l[7]=e[t],l}function qe(r){let e,t;return{c(){e=g("span"),t=g("i"),this.h()},l(l){e=b(l,"SPAN",{class:!0});var s=E(e);t=b(s,"I",{class:!0}),E(t).forEach(f),s.forEach(f),this.h()},h(){v(t,"class","hsr-music"),v(e,"class","note svelte-1exn24g")},m(l,s){S(l,e,s),p(e,t)},d(l){l&&f(e)}}}function He(r){let e,t,l,s,a,n,o,d,m,i,u,h,w,$,A,V,L,T=r[0]===r[7]&&qe();function k(){return r[5](r[7])}return{c(){e=g("div"),t=g("button"),l=g("div"),s=g("span"),a=M(),n=g("picture"),o=g("img"),i=M(),u=g("div"),h=g("img"),$=M(),T&&T.c(),A=M(),this.h()},l(c){e=b(c,"DIV",{class:!0});var _=E(e);t=b(_,"BUTTON",{class:!0});var D=E(t);l=b(D,"DIV",{class:!0});var y=E(l);s=b(y,"SPAN",{class:!0}),E(s).forEach(f),y.forEach(f),a=P(D),n=b(D,"PICTURE",{class:!0});var C=E(n);o=b(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(f),i=P(D),u=b(D,"DIV",{class:!0});var I=E(u);h=b(I,"IMG",{src:!0,alt:!0,class:!0}),I.forEach(f),$=P(D),T&&T.l(D),D.forEach(f),A=P(_),_.forEach(f),this.h()},h(){v(s,"class","svelte-1exn24g"),v(l,"class","indicator svelte-1exn24g"),ee(o.src,d=r[3][`album_${r[7]}.webp`])||v(o,"src",d),v(o,"alt",m=r[7]),v(o,"class","svelte-1exn24g"),v(n,"class","cover svelte-1exn24g"),ee(h.src,w=r[3]["music-disc.webp"])||v(h,"src",w),v(h,"alt","disc"),v(h,"class","svelte-1exn24g"),v(u,"class","disc svelte-1exn24g"),v(t,"class","wrapper svelte-1exn24g"),q(t,"active",r[1]===r[7]),v(e,"class","album-item svelte-1exn24g")},m(c,_){S(c,e,_),p(e,t),p(t,l),p(l,s),p(t,a),p(t,n),p(n,o),p(t,i),p(t,u),p(u,h),p(t,$),T&&T.m(t,null),p(e,A),V||(L=de(t,"click",k),V=!0)},p(c,_){r=c,_&12&&!ee(o.src,d=r[3][`album_${r[7]}.webp`])&&v(o,"src",d),_&4&&m!==(m=r[7])&&v(o,"alt",m),_&8&&!ee(h.src,w=r[3]["music-disc.webp"])&&v(h,"src",w),r[0]===r[7]?T||(T=qe(),T.c(),T.m(t,null)):T&&(T.d(1),T=null),_&6&&q(t,"active",r[1]===r[7])},d(c){c&&f(e),T&&T.d(),V=!1,L()}}}function yt(r){let e,t=r[2],l=[];for(let s=0;s<t.length;s+=1)l[s]=He(Ue(r,t,s));return{c(){e=g("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(f),this.h()},h(){v(e,"class","album-list svelte-1exn24g")},m(s,a){S(s,e,a);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(s,[a]){if(a&31){t=s[2];let n;for(n=0;n<t.length;n+=1){const o=Ue(s,t,n);l[n]?l[n].p(o,a):(l[n]=He(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},i:x,o:x,d(s){s&&f(e),nt(l,s)}}}function St(r,e,t){let l,s;W(r,mt,i=>t(2,l=i)),W(r,$e,i=>t(3,s=i));let{activeAlbum:a=""}=e,{playedAlbum:n=""}=e;const o=se("pickAlbum"),d=i=>{i!==n&&(o(i),X("paper-flip"))},m=i=>d(i);return r.$$set=i=>{"activeAlbum"in i&&t(0,a=i.activeAlbum),"playedAlbum"in i&&t(1,n=i.playedAlbum)},[a,n,l,s,d,m]}class $t extends re{constructor(e){super(),ae(this,e,St,yt,ne,{activeAlbum:0,playedAlbum:1})}}function Mt(r){let e;return{c(){e=g("i"),this.h()},l(t){e=b(t,"I",{class:!0}),E(e).forEach(f),this.h()},h(){v(e,"class","hsr-play")},m(t,l){S(t,e,l)},p:x,d(t){t&&f(e)}}}function Pt(r){let e;function t(a,n){return a[5]&&a[4]>0?jt:Nt}let l=t(r),s=l(r);return{c(){s.c(),e=_e()},l(a){s.l(a),e=_e()},m(a,n){s.m(a,n),S(a,e,n)},p(a,n){l!==(l=t(a))&&(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&f(e)}}}function Nt(r){let e;return{c(){e=g("i"),this.h()},l(t){e=b(t,"I",{class:!0}),E(e).forEach(f),this.h()},h(){v(e,"class","hsr-spinner svelte-vt027v")},m(t,l){S(t,e,l)},d(t){t&&f(e)}}}function jt(r){let e,t,l,s,a,n,o,d;return{c(){e=g("div"),t=g("span"),l=M(),s=g("span"),a=M(),n=g("span"),o=M(),d=g("span"),this.h()},l(m){e=b(m,"DIV",{class:!0});var i=E(e);t=b(i,"SPAN",{class:!0}),E(t).forEach(f),l=P(i),s=b(i,"SPAN",{class:!0}),E(s).forEach(f),a=P(i),n=b(i,"SPAN",{class:!0}),E(n).forEach(f),o=P(i),d=b(i,"SPAN",{class:!0}),E(d).forEach(f),i.forEach(f),this.h()},h(){v(t,"class","svelte-vt027v"),v(s,"class","svelte-vt027v"),v(n,"class","svelte-vt027v"),v(d,"class","svelte-vt027v"),v(e,"class","play-icon svelte-vt027v")},m(m,i){S(m,e,i),p(e,t),p(e,l),p(e,s),p(e,a),p(e,n),p(e,o),p(e,d)},d(m){m&&f(e)}}}function Oe(r){let e,t;return{c(){e=g("span"),t=g("i"),this.h()},l(l){e=b(l,"SPAN",{class:!0});var s=E(e);t=b(s,"I",{class:!0}),E(t).forEach(f),s.forEach(f),this.h()},h(){v(t,"class","hsr-music"),v(e,"class","note svelte-vt027v")},m(l,s){S(l,e,s),p(e,t)},d(l){l&&f(e)}}}function We(r){let e,t,l,s;return{c(){e=g("button"),t=g("i"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=E(e);t=b(n,"I",{class:!0}),E(t).forEach(f),n.forEach(f),this.h()},h(){v(t,"class","hsr-trash"),v(e,"class","delete svelte-vt027v")},m(a,n){S(a,e,n),p(e,t),l||(s=de(e,"click",r[13]),l=!0)},p:x,d(a){a&&f(e),l=!1,s()}}}function Lt(r){let e,t,l,s,a,n,o,d,m,i,u,h,w,$,A,V,L,T,k=r[6]?`${r[7]} /`:"",c,_,D=(r[4]?ye(r[4]):r[10]("phonograph.notLoaded"))+"",y,C,I,R,Y,ge,he,Ae,Ne;function je(j,U){return j[6]?Pt:Mt}let be=je(r),te=be(r),Q=r[1]===r[9].sourceID&&Oe(),J=r[2]==="custom-musics"&&We(r);return{c(){e=g("button"),t=g("i"),l=M(),s=g("div"),a=g("div"),te.c(),n=M(),o=g("div"),d=g("div"),m=g("span"),i=H('"'),u=H(r[0]),h=H('"'),w=M(),Q&&Q.c(),$=M(),A=g("div"),V=g("span"),L=M(),T=g("div"),c=H(k),_=M(),y=H(D),C=M(),I=g("picture"),R=g("img"),ge=M(),J&&J.c(),he=_e(),this.h()},l(j){e=b(j,"BUTTON",{title:!0,id:!0,class:!0});var U=E(e);t=b(U,"I",{class:!0}),E(t).forEach(f),l=P(U),s=b(U,"DIV",{class:!0});var ke=E(s);a=b(ke,"DIV",{class:!0});var Le=E(a);te.l(Le),Le.forEach(f),n=P(ke),o=b(ke,"DIV",{class:!0});var ie=E(o);d=b(ie,"DIV",{class:!0});var Ie=E(d);m=b(Ie,"SPAN",{class:!0});var Ee=E(m);i=O(Ee,'"'),u=O(Ee,r[0]),h=O(Ee,'"'),Ee.forEach(f),w=P(Ie),Q&&Q.l(Ie),Ie.forEach(f),$=P(ie),A=b(ie,"DIV",{class:!0});var Ce=E(A);V=b(Ce,"SPAN",{style:!0,class:!0}),E(V).forEach(f),Ce.forEach(f),L=P(ie),T=b(ie,"DIV",{class:!0});var Te=E(T);c=O(Te,k),_=P(Te),y=O(Te,D),Te.forEach(f),C=P(ie),I=b(ie,"PICTURE",{class:!0});var Be=E(I);R=b(Be,"IMG",{src:!0,alt:!0,class:!0}),Be.forEach(f),ie.forEach(f),ke.forEach(f),U.forEach(f),ge=P(j),J&&J.l(j),he=_e(),this.h()},h(){v(t,"class","hsr-right-arrow svelte-vt027v"),v(a,"class","icon svelte-vt027v"),v(m,"class","title svelte-vt027v"),v(d,"class","track-title svelte-vt027v"),oe(V,"--per",r[8]+"%"),v(V,"class","svelte-vt027v"),v(A,"class","progress svelte-vt027v"),v(T,"class","duration svelte-vt027v"),ee(R.src,Y=r[11]["music.svg"])||v(R,"src",Y),v(R,"alt",""),v(R,"class","svelte-vt027v"),v(I,"class","track-bg svelte-vt027v"),v(o,"class","track-info svelte-vt027v"),v(s,"class","track-wrapper svelte-vt027v"),v(e,"title",r[0]),v(e,"id",r[1]),e.disabled=r[3],v(e,"class","svelte-vt027v"),q(e,"isPlayed",r[6]),q(e,"custom",r[2]==="custom-musics")},m(j,U){S(j,e,U),p(e,t),p(e,l),p(e,s),p(s,a),te.m(a,null),p(s,n),p(s,o),p(o,d),p(d,m),p(m,i),p(m,u),p(m,h),p(d,w),Q&&Q.m(d,null),p(o,$),p(o,A),p(A,V),p(o,L),p(o,T),p(T,c),p(T,_),p(T,y),p(o,C),p(o,I),p(I,R),S(j,ge,U),J&&J.m(j,U),S(j,he,U),Ae||(Ne=de(e,"click",r[17]),Ae=!0)},p(j,[U]){be===(be=je(j))&&te?te.p(j,U):(te.d(1),te=be(j),te&&(te.c(),te.m(a,null))),U&1&&Z(u,j[0]),j[1]===j[9].sourceID?Q||(Q=Oe(),Q.c(),Q.m(d,null)):Q&&(Q.d(1),Q=null),U&256&&oe(V,"--per",j[8]+"%"),U&192&&k!==(k=j[6]?`${j[7]} /`:"")&&Z(c,k),U&1040&&D!==(D=(j[4]?ye(j[4]):j[10]("phonograph.notLoaded"))+"")&&Z(y,D),U&2048&&!ee(R.src,Y=j[11]["music.svg"])&&v(R,"src",Y),U&1&&v(e,"title",j[0]),U&2&&v(e,"id",j[1]),U&8&&(e.disabled=j[3]),U&64&&q(e,"isPlayed",j[6]),U&4&&q(e,"custom",j[2]==="custom-musics"),j[2]==="custom-musics"?J?J.p(j,U):(J=We(j),J.c(),J.m(he.parentNode,he)):J&&(J.d(1),J=null)},i:x,o:x,d(j){j&&f(e),te.d(),Q&&Q.d(),j&&f(ge),J&&J.d(j),j&&f(he),Ae=!1,Ne()}}}function Ct(r,e,t){let l,s,a,n,o,d;W(r,gt,I=>t(15,a=I)),W(r,Ve,I=>t(16,n=I)),W(r,me,I=>t(10,o=I)),W(r,$e,I=>t(11,d=I));let{title:m=""}=e,{sourceID:i=""}=e,{album:u=""}=e,{isWaiting:h=!1}=e,{playedTrack:w}=e,{duration:$}=e,A=!0,V="0:00",L=0;const T=se("wait"),k=se("songReady"),c=se("selectTrack"),_=async I=>{if(I!==w)try{t(5,A=!1),T(!0),k(!1),c(I),await st();const{status:R}=await rt(I);if(R==="error")throw new Error("Server Error");t(14,w=I),t(5,A=!0),T(!1),k(!0)}catch(R){console.error(R),T(!1)}},D=se("deletePrompt"),y=()=>{X(),D(i)},C=()=>_(i);return r.$$set=I=>{"title"in I&&t(0,m=I.title),"sourceID"in I&&t(1,i=I.sourceID),"album"in I&&t(2,u=I.album),"isWaiting"in I&&t(3,h=I.isWaiting),"playedTrack"in I&&t(14,w=I.playedTrack),"duration"in I&&t(4,$=I.duration)},r.$$.update=()=>{r.$$.dirty&65536&&t(9,l=n),r.$$.dirty&16386&&t(6,s=w===i),r.$$.dirty&32880&&(s&&A?(t(7,V=ye(a)),t(8,L=a/$*100||0)):(t(7,V="0:00"),t(8,L=0)))},[m,i,u,h,$,A,s,V,L,l,o,d,_,y,w,a,n,C]}class Bt extends re{constructor(e){super(),ae(this,e,Ct,Lt,ne,{title:0,sourceID:1,album:2,isWaiting:3,playedTrack:14,duration:4})}}function Rt(r){let e,t,l,s;return{c(){e=g("div"),t=g("span"),l=M(),s=g("span"),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=E(e);t=b(n,"SPAN",{class:!0}),E(t).forEach(f),l=P(n),s=b(n,"SPAN",{class:!0}),E(s).forEach(f),n.forEach(f),this.h()},h(){v(t,"class","svelte-1jcbn1v"),v(s,"class","svelte-1jcbn1v"),v(e,"class","loader-ripple svelte-1jcbn1v")},m(a,n){S(a,e,n),p(e,t),p(e,l),p(e,s)},p:x,i:x,o:x,d(a){a&&f(e)}}}class Ut extends re{constructor(e){super(),ae(this,e,null,Rt,ne,{})}}function qt(r){let e,t,l;return{c(){e=g("input"),this.h()},l(s){e=b(s,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){v(e,"type","text"),e.value=r[0],v(e,"placeholder",r[1]),e.disabled=r[2],v(e,"class","svelte-fav98g"),q(e,"proInput",r[5]),q(e,"error",r[3]),q(e,"hideValue",r[4])},m(s,a){S(s,e,a),t||(l=[de(e,"change",r[7]),de(e,"input",r[6])],t=!0)},p(s,[a]){a&1&&e.value!==s[0]&&(e.value=s[0]),a&2&&v(e,"placeholder",s[1]),a&4&&(e.disabled=s[2]),a&32&&q(e,"proInput",s[5]),a&8&&q(e,"error",s[3]),a&16&&q(e,"hideValue",s[4])},i:x,o:x,d(s){s&&f(e),t=!1,it(l)}}}function Ht(r,e,t){let{value:l=""}=e,{placeholder:s=""}=e,{disabled:a=!1}=e,{error:n=!1}=e,{hideValue:o=!1}=e,{proInput:d=!1}=e;const m=ot(),i=h=>m("input",h),u=h=>m("change",h);return r.$$set=h=>{"value"in h&&t(0,l=h.value),"placeholder"in h&&t(1,s=h.placeholder),"disabled"in h&&t(2,a=h.disabled),"error"in h&&t(3,n=h.error),"hideValue"in h&&t(4,o=h.hideValue),"proInput"in h&&t(5,d=h.proInput)},[l,s,a,n,o,d,i,u]}class Ot extends re{constructor(e){super(),ae(this,e,Ht,qt,ne,{value:0,placeholder:1,disabled:2,error:3,hideValue:4,proInput:5})}}function Wt(r){const e=r.slice(),t=e[5];return e[16]=t.author,e[17]=t.title,e[18]=t.description,e[19]=t.images,e}function ze(r){let e,t;return e=new wt({props:{$$slots:{default:[zt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){K(e,l,s),t=!0},p(l,s){const a={};s&1048584&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function zt(r){let e;return{c(){e=H(r[3])},l(t){e=O(t,r[3])},m(t,l){S(t,e,l)},p(t,l){l&8&&Z(e,t[3])},d(t){t&&f(e)}}}function Ge(r){let e,t;return e=new at({props:{title:r[7]("phonograph.addTrack"),disabled:r[5].message!=="ok",$$slots:{default:[Qt]},$$scope:{ctx:r}}}),e.$on("confirm",r[10]),e.$on("cancel",r[8]),{c(){z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){K(e,l,s),t=!0},p(l,s){const a={};s&128&&(a.title=l[7]("phonograph.addTrack")),s&32&&(a.disabled=l[5].message!=="ok"),s&1048818&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Gt(r){let e,t=r[7]("phonograph.inputURL")+"",l,s,a,n,o,d,m;return a=new Ot({props:{placeholder:"https://www.youtube.com/watch?v=...",value:r[1]}}),a.$on("input",r[11]),d=new Me({props:{dark:!0,icon:"play",disabled:!r[6],$$slots:{default:[Jt]},$$scope:{ctx:r}}}),d.$on("click",r[9]),{c(){e=g("span"),l=H(t),s=M(),z(a.$$.fragment),n=M(),o=g("div"),z(d.$$.fragment),this.h()},l(i){e=b(i,"SPAN",{});var u=E(e);l=O(u,t),u.forEach(f),s=P(i),G(a.$$.fragment,i),n=P(i),o=b(i,"DIV",{class:!0});var h=E(o);G(d.$$.fragment,h),h.forEach(f),this.h()},h(){v(o,"class","button svelte-jpewv0")},m(i,u){S(i,e,u),p(e,l),S(i,s,u),K(a,i,u),S(i,n,u),S(i,o,u),K(d,o,null),m=!0},p(i,u){(!m||u&128)&&t!==(t=i[7]("phonograph.inputURL")+"")&&Z(l,t);const h={};u&2&&(h.value=i[1]),a.$set(h);const w={};u&64&&(w.disabled=!i[6]),u&1048704&&(w.$$scope={dirty:u,ctx:i}),d.$set(w)},i(i){m||(N(a.$$.fragment,i),N(d.$$.fragment,i),m=!0)},o(i){B(a.$$.fragment,i),B(d.$$.fragment,i),m=!1},d(i){i&&f(e),i&&f(s),F(a,i),i&&f(n),i&&f(o),F(d)}}}function Kt(r){let e,t,l,s,a,n,o,d,m=r[17]+"",i,u,h,w,$,A=r[16]+"",V,L,T,k,c=r[18]&&Ke(r);return{c(){e=g("div"),t=g("div"),l=g("picture"),s=g("img"),n=M(),o=g("div"),d=g("div"),i=H(m),u=M(),h=g("div"),w=g("i"),$=M(),V=H(A),L=M(),c&&c.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var D=E(e);t=b(D,"DIV",{class:!0});var y=E(t);l=b(y,"PICTURE",{});var C=E(l);s=b(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(f),y.forEach(f),n=P(D),o=b(D,"DIV",{class:!0});var I=E(o);d=b(I,"DIV",{class:!0});var R=E(d);i=O(R,m),R.forEach(f),u=P(I),h=b(I,"DIV",{class:!0});var Y=E(h);w=b(Y,"I",{class:!0}),E(w).forEach(f),$=P(Y),V=O(Y,A),Y.forEach(f),L=P(I),c&&c.l(I),I.forEach(f),D.forEach(f),this.h()},h(){ee(s.src,a=r[19][0]?.url)||v(s,"src",a),v(s,"alt","Thumbnail"),v(s,"class","svelte-jpewv0"),v(t,"class","thumb svelte-jpewv0"),v(d,"class","title svelte-jpewv0"),v(w,"class","hsr-character"),v(h,"class","channel svelte-jpewv0"),v(o,"class","info svelte-jpewv0"),v(e,"class","row svelte-jpewv0")},m(_,D){S(_,e,D),p(e,t),p(t,l),p(l,s),p(e,n),p(e,o),p(o,d),p(d,i),p(o,u),p(o,h),p(h,w),p(h,$),p(h,V),p(o,L),c&&c.m(o,null),k=!0},p(_,D){(!k||D&32&&!ee(s.src,a=_[19][0]?.url))&&v(s,"src",a),(!k||D&32)&&m!==(m=_[17]+"")&&Z(i,m),(!k||D&32)&&A!==(A=_[16]+"")&&Z(V,A),_[18]?c?(c.p(_,D),D&32&&N(c,1)):(c=Ke(_),c.c(),N(c,1),c.m(o,null)):c&&(ce(),B(c,1,1,()=>{c=null}),ue())},i(_){k||(N(c),T||fe(()=>{T=Se(e,pe,{duration:250}),T.start()}),k=!0)},o(_){B(c),k=!1},d(_){_&&f(e),c&&c.d()}}}function Ft(r){let e,t,l;return t=new Ut({}),{c(){e=g("div"),z(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);G(t.$$.fragment,a),a.forEach(f),this.h()},h(){v(e,"class","loader")},m(s,a){S(s,e,a),K(t,e,null),l=!0},p:x,i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){B(t.$$.fragment,s),l=!1},d(s){s&&f(e),F(t)}}}function Jt(r){let e=r[7]("phonograph.check")+"",t;return{c(){t=H(e)},l(l){t=O(l,e)},m(l,s){S(l,t,s)},p(l,s){s&128&&e!==(e=l[7]("phonograph.check")+"")&&Z(t,e)},d(l){l&&f(t)}}}function Ke(r){let e,t,l;return t=new Pe({props:{dark:!0,$$slots:{default:[Zt]},$$scope:{ctx:r}}}),{c(){e=g("div"),z(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);G(t.$$.fragment,a),a.forEach(f),this.h()},h(){v(e,"class","description svelte-jpewv0")},m(s,a){S(s,e,a),K(t,e,null),l=!0},p(s,a){const n={};a&1048608&&(n.$$scope={dirty:a,ctx:s}),t.$set(n)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){B(t.$$.fragment,s),l=!1},d(s){s&&f(e),F(t)}}}function Zt(r){let e,t=r[18].replace(/\n/g,"<br/>")+"";return{c(){e=g("p")},l(l){e=b(l,"P",{});var s=E(e);s.forEach(f)},m(l,s){S(l,e,s),e.innerHTML=t},p(l,s){s&32&&t!==(t=l[18].replace(/\n/g,"<br/>")+"")&&(e.innerHTML=t)},d(l){l&&f(e)}}}function Qt(r){let e,t,l,s;const a=[Ft,Kt,Gt],n=[];function o(m,i){return m[4]?0:m[5].message==="ok"?1:2}function d(m,i){return i===1?Wt(m):m}return t=o(r),l=n[t]=a[t](d(r,t)),{c(){e=g("div"),l.c(),this.h()},l(m){e=b(m,"DIV",{class:!0});var i=E(e);l.l(i),i.forEach(f),this.h()},h(){v(e,"class","addtrack svelte-jpewv0")},m(m,i){S(m,e,i),n[t].m(e,null),s=!0},p(m,i){let u=t;t=o(m),t===u?n[t].p(d(m,t),i):(ce(),B(n[u],1,1,()=>{n[u]=null}),ue(),l=n[t],l?l.p(d(m,t),i):(l=n[t]=a[t](d(m,t)),l.c()),N(l,1),l.m(e,null))},i(m){s||(N(l),s=!0)},o(m){B(l),s=!1},d(m){m&&f(e),n[t].d()}}}function Xt(r){let e,t,l,s=r[2]&&ze(r),a=r[0]&&Ge(r);return{c(){s&&s.c(),e=M(),a&&a.c(),t=_e()},l(n){s&&s.l(n),e=P(n),a&&a.l(n),t=_e()},m(n,o){s&&s.m(n,o),S(n,e,o),a&&a.m(n,o),S(n,t,o),l=!0},p(n,[o]){n[2]?s?(s.p(n,o),o&4&&N(s,1)):(s=ze(n),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(ce(),B(s,1,1,()=>{s=null}),ue()),n[0]?a?(a.p(n,o),o&1&&N(a,1)):(a=Ge(n),a.c(),N(a,1),a.m(t.parentNode,t)):a&&(ce(),B(a,1,1,()=>{a=null}),ue())},i(n){l||(N(s),N(a),l=!0)},o(n){B(s),B(a),l=!1},d(n){s&&s.d(n),n&&f(e),a&&a.d(n),n&&f(t)}}}function Yt(r,e,t){let l,s,a;W(r,me,k=>t(7,s=k)),W(r,ve,k=>t(12,a=k));let{show:n=!1}=e;const o=se("handleModal"),d=()=>{o(!1),X("modal-close")};le("closeModal",d);let m="";const i=k=>{if(!k)return"";try{const c=/(https?:\/\/)?(((m|www)\.)?(youtube(-nocookie)?|youtube.googleapis)\.com.*(v\/|v=|vi=|vi\/|e\/|embed\/|user\/.*\/u\/\d+\/)|youtu\.be\/)([_0-9a-z-]+)/i,_=k.match(c)[8];return typeof _=="string"?_:""}catch{return""}};let u=!1,h="";le("closeToast",()=>t(2,u=!1));let w=!1,$={};const A=()=>{const k=a.filter(({album:_})=>_!=="custom-musics"),c=k.findIndex(_=>_.sourceID===l);return c<0?!1:k[c]},V=async()=>{X(),t(4,w=!0);try{const k=A();if(k){t(2,u=!0);const c=s(`phonograph.${k.album}`);t(3,h=s("duplicatedTrack",{values:{trackTitle:k.title,albumName:c}}))}else if(t(5,$=await Tt(l)),$.message!=="ok")throw new Error("Server Error");t(4,w=!1)}catch(k){console.error(k),t(4,w=!1),t(2,u=!0),t(3,h=s("failedToFetch"))}},L=()=>{X();const{title:k,description:c}=$,_={album:"custom-musics",sourceID:l,title:k,description:c};ve.update(D=>{const y=D.findIndex(C=>C.sourceID===l);return y<0?[...D,_]:(D[y]=_,D)}),lt.put(_),o(!1),t(5,$={}),t(1,m="")},T=k=>t(1,m=k.detail.target.value);return r.$$set=k=>{"show"in k&&t(0,n=k.show)},r.$$.update=()=>{r.$$.dirty&2&&t(6,l=i(m))},[n,m,u,h,w,$,l,s,d,V,L,T]}class xt extends re{constructor(e){super(),ae(this,e,Yt,Xt,ne,{show:0})}}function Fe(r,e,t){const l=r.slice();l[22]=e[t],l[28]=t;const s=l[22];return l[23]=s.title,l[24]=s.sourceID,l[25]=s.duration,l[26]=s.album,l}function Je(r){let e,t;return e=new at({props:{title:r[9]("phonograph.removeTrack"),$$slots:{default:[el]},$$scope:{ctx:r}}}),e.$on("confirm",r[13]),e.$on("cancel",r[12]),{c(){z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){K(e,l,s),t=!0},p(l,s){const a={};s&512&&(a.title=l[9]("phonograph.removeTrack")),s&536871424&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function el(r){let e,t=r[9]("phonograph.deleteTrack")+"",l;return{c(){e=g("div"),l=H(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);l=O(a,t),a.forEach(f),this.h()},h(){v(e,"class","deleteTrack")},m(s,a){S(s,e,a),p(e,l)},p(s,a){a&512&&t!==(t=s[9]("phonograph.deleteTrack")+"")&&Z(l,t)},d(s){s&&f(e)}}}function Ze(r){let e,t,l,s=r[9]("phonograph.notrackAdded")+"",a;return{c(){e=g("div"),t=g("div"),l=g("span"),a=H(s),this.h()},l(n){e=b(n,"DIV",{class:!0});var o=E(e);t=b(o,"DIV",{class:!0});var d=E(t);l=b(d,"SPAN",{});var m=E(l);a=O(m,s),m.forEach(f),d.forEach(f),o.forEach(f),this.h()},h(){v(t,"class","title"),v(e,"class","track-item custom no-track svelte-tdjbvu")},m(n,o){S(n,e,o),p(e,t),p(t,l),p(l,a)},p(n,o){o&512&&s!==(s=n[9]("phonograph.notrackAdded")+"")&&Z(a,s)},d(n){n&&f(e)}}}function Qe(r,e){let t,l,s,a;return l=new Bt({props:{playedTrack:e[2],title:e[23],sourceID:e[24],isWaiting:e[6],duration:e[25],album:e[26]}}),{key:r,first:null,c(){t=g("div"),z(l.$$.fragment),this.h()},l(n){t=b(n,"DIV",{class:!0});var o=E(t);G(l.$$.fragment,o),o.forEach(f),this.h()},h(){v(t,"class","track-item svelte-tdjbvu"),this.first=t},m(n,o){S(n,t,o),K(l,t,null),a=!0},p(n,o){e=n;const d={};o&4&&(d.playedTrack=e[2]),o&2&&(d.title=e[23]),o&2&&(d.sourceID=e[24]),o&64&&(d.isWaiting=e[6]),o&2&&(d.duration=e[25]),o&2&&(d.album=e[26]),l.$set(d)},i(n){a||(N(l.$$.fragment,n),s||fe(()=>{s=Se(t,pe,{duration:250,delay:Math.sqrt(e[28]*15e3)}),s.start()}),a=!0)},o(n){B(l.$$.fragment,n),a=!1},d(n){n&&f(t),F(l)}}}function Xe(r){let e,t,l;return t=new Me({props:{icon:"music",$$slots:{default:[tl]},$$scope:{ctx:r}}}),t.$on("click",r[14]),{c(){e=g("div"),z(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);G(t.$$.fragment,a),a.forEach(f),this.h()},h(){v(e,"class","track-item custom svelte-tdjbvu")},m(s,a){S(s,e,a),K(t,e,null),l=!0},p(s,a){const n={};a&536871424&&(n.$$scope={dirty:a,ctx:s}),t.$set(n)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){B(t.$$.fragment,s),l=!1},d(s){s&&f(e),F(t)}}}function tl(r){let e=r[9]("phonograph.addCustom")+"",t;return{c(){t=H(e)},l(l){t=O(l,e)},m(l,s){S(l,t,s)},p(l,s){s&512&&e!==(e=l[9]("phonograph.addCustom")+"")&&Z(t,e)},d(l){l&&f(t)}}}function ll(r){let e,t,l=[],s=new Map,a,n,o=r[0]==="custom-musics"&&r[1].length<1&&Ze(r),d=r[1];const m=u=>u[22];for(let u=0;u<d.length;u+=1){let h=Fe(r,d,u),w=m(h);s.set(w,l[u]=Qe(w,h))}let i=r[0]==="custom-musics"&&Xe(r);return{c(){e=g("div"),o&&o.c(),t=M();for(let u=0;u<l.length;u+=1)l[u].c();a=M(),i&&i.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=E(e);o&&o.l(h),t=P(h);for(let w=0;w<l.length;w+=1)l[w].l(h);a=P(h),i&&i.l(h),h.forEach(f),this.h()},h(){v(e,"class","list-wrapper svelte-tdjbvu")},m(u,h){S(u,e,h),o&&o.m(e,null),p(e,t);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(e,null);p(e,a),i&&i.m(e,null),n=!0},p(u,h){u[0]==="custom-musics"&&u[1].length<1?o?o.p(u,h):(o=Ze(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),h&70&&(d=u[1],ce(),l=ct(l,h,m,1,u,d,s,e,ut,Qe,a,Fe),ue()),u[0]==="custom-musics"?i?(i.p(u,h),h&1&&N(i,1)):(i=Xe(u),i.c(),N(i,1),i.m(e,null)):i&&(ce(),B(i,1,1,()=>{i=null}),ue())},i(u){if(!n){for(let h=0;h<d.length;h+=1)N(l[h]);N(i),n=!0}},o(u){for(let h=0;h<l.length;h+=1)B(l[h]);B(i),n=!1},d(u){u&&f(e),o&&o.d();for(let h=0;h<l.length;h+=1)l[h].d();i&&i.d()}}}function sl(r){let e=(r[3]===r[2]?r[9]("phonograph.currentSong"):r[9]("phonograph.setSong"))+"",t;return{c(){t=H(e)},l(l){t=O(l,e)},m(l,s){S(l,t,s)},p(l,s){s&524&&e!==(e=(l[3]===l[2]?l[9]("phonograph.currentSong"):l[9]("phonograph.setSong"))+"")&&Z(t,e)},d(l){l&&f(t)}}}function rl(r){let e,t,l,s,a,n,o=r[9](`phonograph.${r[0]}`)+"",d,m,i,u,h,w,$,A,V,L,T;e=new xt({props:{show:r[7]}});let k=r[8]&&Je(r);return u=new Pe({props:{visibility:"hidden",$$slots:{default:[ll]},$$scope:{ctx:r}}}),V=new Me({props:{icon:"music",disabled:!r[5]||r[3]===r[2],$$slots:{default:[sl]},$$scope:{ctx:r}}}),V.$on("click",r[15]),{c(){z(e.$$.fragment),t=M(),k&&k.c(),l=M(),s=g("div"),a=g("div"),n=g("i"),d=H(o),m=M(),i=g("div"),z(u.$$.fragment),h=M(),w=g("div"),$=M(),A=g("div"),z(V.$$.fragment),this.h()},l(c){G(e.$$.fragment,c),t=P(c),k&&k.l(c),l=P(c),s=b(c,"DIV",{class:!0,style:!0});var _=E(s);a=b(_,"DIV",{class:!0});var D=E(a);n=b(D,"I",{});var y=E(n);d=O(y,o),y.forEach(f),D.forEach(f),m=P(_),i=b(_,"DIV",{class:!0});var C=E(i);G(u.$$.fragment,C),C.forEach(f),h=P(_),w=b(_,"DIV",{class:!0}),E(w).forEach(f),$=P(_),A=b(_,"DIV",{class:!0});var I=E(A);G(V.$$.fragment,I),I.forEach(f),_.forEach(f),this.h()},h(){v(a,"class","album-name svelte-tdjbvu"),v(i,"class","track-list svelte-tdjbvu"),v(w,"class","divider svelte-tdjbvu"),v(A,"class","set-bgm svelte-tdjbvu"),v(s,"class","tracks svelte-tdjbvu"),oe(s,"--wd",r[4]+"px"),fe(()=>r[16].call(s))},m(c,_){K(e,c,_),S(c,t,_),k&&k.m(c,_),S(c,l,_),S(c,s,_),p(s,a),p(a,n),p(n,d),p(s,m),p(s,i),K(u,i,null),p(s,h),p(s,w),p(s,$),p(s,A),K(V,A,null),L=et(s,r[16].bind(s)),T=!0},p(c,[_]){const D={};_&128&&(D.show=c[7]),e.$set(D),c[8]?k?(k.p(c,_),_&256&&N(k,1)):(k=Je(c),k.c(),N(k,1),k.m(l.parentNode,l)):k&&(ce(),B(k,1,1,()=>{k=null}),ue()),(!T||_&513)&&o!==(o=c[9](`phonograph.${c[0]}`)+"")&&Z(d,o);const y={};_&536871495&&(y.$$scope={dirty:_,ctx:c}),u.$set(y);const C={};_&44&&(C.disabled=!c[5]||c[3]===c[2]),_&536871436&&(C.$$scope={dirty:_,ctx:c}),V.$set(C),(!T||_&16)&&oe(s,"--wd",c[4]+"px")},i(c){T||(N(e.$$.fragment,c),N(k),N(u.$$.fragment,c),N(V.$$.fragment,c),T=!0)},o(c){B(e.$$.fragment,c),B(k),B(u.$$.fragment,c),B(V.$$.fragment,c),T=!1},d(c){F(e,c),c&&f(t),k&&k.d(c),c&&f(l),c&&f(s),F(u),F(V),L()}}}function al(r,e,t){let l,s;W(r,Ve,I=>t(19,l=I)),W(r,me,I=>t(9,s=I));let{playedAlbum:a=""}=e,{trackList:n=[]}=e,{playedTrack:o}=e,{activeTrack:d}=e,m,i=1,u=!1,h=!1;le("wait",I=>t(6,h=I)),le("songReady",I=>t(5,u=I));const w=se("setMusic"),$=se("pickTrack");le("selectTrack",I=>{if(o!==I)return $(I),i===1?(i=2,X("music-select1")):(i=1,X("music-select2"))});let V=!1;const L=I=>t(7,V=I);le("handleModal",L);let T=!1,k="";const c=()=>{X("modal-close"),t(8,T=!1)};le("closeModal",c),le("deletePrompt",I=>{k=I,t(8,T=!0)});const _=()=>{X(),l.sourceID===k&&bt(),ve.update(I=>I.filter(R=>R.sourceID!==k)),lt.delete(k),k="",t(8,T=!1)},D=()=>{L(!0),X()},y=()=>w(o);function C(){m=this.clientWidth,t(4,m)}return r.$$set=I=>{"playedAlbum"in I&&t(0,a=I.playedAlbum),"trackList"in I&&t(1,n=I.trackList),"playedTrack"in I&&t(2,o=I.playedTrack),"activeTrack"in I&&t(3,d=I.activeTrack)},[a,n,o,d,m,u,h,V,T,s,w,L,c,_,D,y,C]}class nl extends re{constructor(e){super(),ae(this,e,al,rl,ne,{playedAlbum:0,trackList:1,playedTrack:2,activeTrack:3})}}function Ye(r){let e,t,l=(r[2].description||"")?.replace(/\n/g,"<br/>")+"";return{c(){e=g("div"),t=g("p"),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);t=b(a,"P",{class:!0});var n=E(t);n.forEach(f),a.forEach(f),this.h()},h(){v(t,"class","svelte-9qnu8b"),v(e,"class","description svelte-9qnu8b")},m(s,a){S(s,e,a),p(e,t),t.innerHTML=l},p(s,a){a&4&&l!==(l=(s[2].description||"")?.replace(/\n/g,"<br/>")+"")&&(t.innerHTML=l)},d(s){s&&f(e)}}}function xe(r){let e,t,l,s=r[3]("phonograph.suffle")+"",a,n,o,d,m;return{c(){e=g("button"),t=g("i"),l=M(),a=H(s),this.h()},l(i){e=b(i,"BUTTON",{title:!0,class:!0});var u=E(e);t=b(u,"I",{class:!0}),E(t).forEach(f),l=P(u),a=O(u,s),u.forEach(f),this.h()},h(){v(t,"class","hsr-suffle svelte-9qnu8b"),v(e,"title","Suffle Playlist"),v(e,"class","svelte-9qnu8b"),q(e,"active",r[1]===void 0||r[1])},m(i,u){S(i,e,u),p(e,t),p(e,l),p(e,a),o=!0,d||(m=de(e,"click",r[5]),d=!0)},p(i,u){(!o||u&8)&&s!==(s=i[3]("phonograph.suffle")+"")&&Z(a,s),(!o||u&2)&&q(e,"active",i[1]===void 0||i[1])},i(i){o||(fe(()=>{o&&(n||(n=De(e,pe,{duration:250},!0)),n.run(1))}),o=!0)},o(i){n||(n=De(e,pe,{duration:250},!1)),n.run(0),o=!1},d(i){i&&f(e),i&&n&&n.end(),d=!1,m()}}}function il(r){let e,t,l,s,a=r[2].title+"",n,o,d,m,i,u,h,w,$=r[3]("phonograph.loop")+"",A,V,L,T,k,c=r[2].description&&Ye(r),_=!r[0]&&xe(r);return{c(){e=g("div"),t=g("div"),l=g("span"),s=H('"'),n=H(a),o=H('"'),d=M(),c&&c.c(),m=M(),i=g("div"),u=g("button"),h=g("i"),w=M(),A=H($),V=M(),_&&_.c(),this.h()},l(D){e=b(D,"DIV",{class:!0});var y=E(e);t=b(y,"DIV",{class:!0});var C=E(t);l=b(C,"SPAN",{class:!0});var I=E(l);s=O(I,'"'),n=O(I,a),o=O(I,'"'),I.forEach(f),d=P(C),c&&c.l(C),C.forEach(f),m=P(y),i=b(y,"DIV",{class:!0});var R=E(i);u=b(R,"BUTTON",{title:!0,class:!0});var Y=E(u);h=b(Y,"I",{class:!0}),E(h).forEach(f),w=P(Y),A=O(Y,$),Y.forEach(f),V=P(R),_&&_.l(R),R.forEach(f),y.forEach(f),this.h()},h(){v(l,"class","onplay svelte-9qnu8b"),v(t,"class","information"),v(h,"class","hsr-loop svelte-9qnu8b"),v(u,"title","Loop This Music"),v(u,"class","svelte-9qnu8b"),q(u,"active",r[0]),v(i,"class","controls svelte-9qnu8b"),v(e,"class","controller")},m(D,y){S(D,e,y),p(e,t),p(t,l),p(l,s),p(l,n),p(l,o),p(t,d),c&&c.m(t,null),p(e,m),p(e,i),p(i,u),p(u,h),p(u,w),p(u,A),p(i,V),_&&_.m(i,null),L=!0,T||(k=de(u,"click",r[4]),T=!0)},p(D,[y]){(!L||y&4)&&a!==(a=D[2].title+"")&&Z(n,a),D[2].description?c?c.p(D,y):(c=Ye(D),c.c(),c.m(t,null)):c&&(c.d(1),c=null),(!L||y&8)&&$!==($=D[3]("phonograph.loop")+"")&&Z(A,$),(!L||y&1)&&q(u,"active",D[0]),D[0]?_&&(ce(),B(_,1,1,()=>{_=null}),ue()):_?(_.p(D,y),y&1&&N(_,1)):(_=xe(D),_.c(),N(_,1),_.m(i,null))},i(D){L||(N(_),L=!0)},o(D){B(_),L=!1},d(D){D&&f(e),c&&c.d(),_&&_.d(),T=!1,k()}}}function ol(r,e,t){let l,s,a;W(r,ve,u=>t(7,s=u)),W(r,me,u=>t(3,a=u));let{playedSID:n}=e,o=we.get("loopTrack"),d=we.get("suffleTrack");const m=()=>{X(),t(0,o=!o),we.set("loopTrack",o)},i=()=>{X(),t(1,d=d===void 0?!1:!d),we.set("suffleTrack",d)};return r.$$set=u=>{"playedSID"in u&&t(6,n=u.playedSID)},r.$$.update=()=>{r.$$.dirty&192&&t(2,l=s.find(({sourceID:u})=>u===n)||{})},[o,d,l,a,m,i,n,s]}class cl extends re{constructor(e){super(),ae(this,e,ol,il,ne,{playedSID:6})}}function ul(r){let e,t,l;return t=new kt({}),t.$on("click",r[8]),{c(){e=g("div"),z(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var a=E(e);G(t.$$.fragment,a),a.forEach(f),this.h()},h(){v(e,"class","close")},m(s,a){S(s,e,a),K(t,e,null),l=!0},p:x,i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){B(t.$$.fragment,s),l=!1},d(s){s&&f(e),F(t)}}}function fl(r){let e,t;return e=new $t({props:{activeAlbum:r[2],playedAlbum:r[1]}}),{c(){z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){K(e,l,s),t=!0},p(l,s){const a={};s&4&&(a.activeAlbum=l[2]),s&2&&(a.playedAlbum=l[1]),e.$set(a)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function dl(r){let e,t,l,s,a,n,o,d,m,i,u,h,w,$,A,V,L,T,k;return document.title=e=r[6]("phonograph.heading")+" | "+r[6]("title"),s=new At({}),n=new It({props:{icon:"phonograph",h2:r[6]("phonograph.heading"),relative:!0,$$slots:{default:[ul]},$$scope:{ctx:r}}}),i=new Pe({props:{visibility:"hidden",$$slots:{default:[fl]},$$scope:{ctx:r}}}),w=new nl({props:{playedAlbum:r[1],activeTrack:r[0],playedTrack:r[4],trackList:r[5]}}),V=new cl({props:{playedSID:r[4]}}),{c(){t=M(),l=g("section"),z(s.$$.fragment),a=M(),z(n.$$.fragment),o=M(),d=g("div"),m=g("div"),z(i.$$.fragment),u=M(),h=g("div"),z(w.$$.fragment),$=M(),A=g("div"),z(V.$$.fragment),this.h()},l(c){ft("svelte-1r1kucc",document.head).forEach(f),t=P(c),l=b(c,"SECTION",{class:!0});var D=E(l);G(s.$$.fragment,D),a=P(D),G(n.$$.fragment,D),o=P(D),d=b(D,"DIV",{class:!0});var y=E(d);m=b(y,"DIV",{class:!0,style:!0});var C=E(m);G(i.$$.fragment,C),C.forEach(f),u=P(y),h=b(y,"DIV",{class:!0});var I=E(h);G(w.$$.fragment,I),I.forEach(f),$=P(y),A=b(y,"DIV",{class:!0});var R=E(A);G(V.$$.fragment,R),R.forEach(f),y.forEach(f),D.forEach(f),this.h()},h(){v(m,"class","album-list svelte-1xvl0ev"),oe(m,"--controlH",r[3]+"px"),v(h,"class","playlist svelte-1xvl0ev"),v(A,"class","controller svelte-1xvl0ev"),fe(()=>r[12].call(A)),v(d,"class","container svelte-1xvl0ev"),v(l,"class","svelte-1xvl0ev"),q(l,"lite",r[7])},m(c,_){S(c,t,_),S(c,l,_),K(s,l,null),p(l,a),K(n,l,null),p(l,o),p(l,d),p(d,m),K(i,m,null),p(d,u),p(d,h),K(w,h,null),p(d,$),p(d,A),K(V,A,null),L=et(A,r[12].bind(A)),k=!0},p(c,[_]){(!k||_&64)&&e!==(e=c[6]("phonograph.heading")+" | "+c[6]("title"))&&(document.title=e);const D={};_&64&&(D.h2=c[6]("phonograph.heading")),_&32768&&(D.$$scope={dirty:_,ctx:c}),n.$set(D);const y={};_&32774&&(y.$$scope={dirty:_,ctx:c}),i.$set(y),(!k||_&8)&&oe(m,"--controlH",c[3]+"px");const C={};_&2&&(C.playedAlbum=c[1]),_&1&&(C.activeTrack=c[0]),_&16&&(C.playedTrack=c[4]),_&32&&(C.trackList=c[5]),w.$set(C);const I={};_&16&&(I.playedSID=c[4]),V.$set(I),(!k||_&128)&&q(l,"lite",c[7])},i(c){k||(N(s.$$.fragment,c),N(n.$$.fragment,c),N(i.$$.fragment,c),N(w.$$.fragment,c),N(V.$$.fragment,c),fe(()=>{k&&(T||(T=De(l,pe,{duration:250},!0)),T.run(1))}),k=!0)},o(c){B(s.$$.fragment,c),B(n.$$.fragment,c),B(i.$$.fragment,c),B(w.$$.fragment,c),B(V.$$.fragment,c),T||(T=De(l,pe,{duration:250},!1)),T.run(0),k=!1},d(c){c&&f(t),c&&f(l),F(s),F(n),F(i),F(w),F(V),L(),c&&T&&T.end()}}}function hl(r,e,t){let l,s,a,n,o,d,m,i,u,h;W(r,ve,T=>t(10,m=T)),W(r,Ve,T=>t(11,i=T)),W(r,me,T=>t(6,u=T)),W(r,tt,T=>t(7,h=T));let w;dt(()=>X("music-loaded")),le("pickAlbum",T=>t(1,o=T)),le("pickTrack",T=>t(4,a=T)),le("setMusic",T=>{X("music-set");const k=m.find(({sourceID:c})=>c===T);Ve.set(k)});const A=se("navigate"),V=()=>{X("music-close"),A("index")};ht(async()=>{a!==s&&(await st(),rt(s))});function L(){w=this.clientHeight,t(3,w)}return r.$$.update=()=>{r.$$.dirty&2048&&t(9,l=i),r.$$.dirty&512&&t(0,s=l.sourceID),r.$$.dirty&1&&t(4,a=s),r.$$.dirty&512&&t(2,n=l.album),r.$$.dirty&4&&t(1,o=n),r.$$.dirty&1026&&t(5,d=m.filter(({album:T})=>T===o))},[s,o,n,w,a,d,u,h,V,l,m,i,L]}class El extends re{constructor(e){super(),ae(this,e,hl,dl,ne,{})}}export{El as default};
